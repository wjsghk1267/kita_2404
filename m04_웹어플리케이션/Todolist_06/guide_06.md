설정:
  app.py에서 플라스크 애플리케이션을 초기화하고 데이터베이스와 CSRF 보호를 설정합니다.

회원가입 (GET /register, POST /register):
  register() 함수에서 RegistrationForm을 사용하여 회원가입 폼을 처리합니다.
  폼 제출 시 유효성 검사를 수행하고 새로운 사용자를 데이터베이스에 추가합니다.

로그인 (GET /login, POST /login):
  login() 함수에서 LoginForm을 사용하여 로그인 폼을 처리합니다.
  폼 제출 시 유효성 검사를 수행하고 사용자를 인증합니다.
  성공 시 세션에 사용자 정보를 저장하고 메인 페이지로 리디렉션합니다.

로그아웃 (GET /logout):
  logout() 함수에서 세션을 지우고 로그인 페이지로 리디렉션합니다.

메인 페이지 (GET /):
  로그인한 사용자만 접근할 수 있습니다.
  index() 함수에서 index.html 템플릿을 렌더링하여 작업 추가 폼과 작업 목록을 표시합니다.

작업 목록 (GET /tasks):
  로그인한 사용자만 접근할 수 있습니다.
  tasks() 함수에서 데이터베이스의 모든 작업을 조회하여 JSON 형식으로 반환합니다.
  자바스크립트에서 이 데이터를 받아 작업 목록을 화면에 표시합니다.

작업 추가 (POST /):
  로그인한 사용자만 접근할 수 있습니다.
  add_task() 함수에서 메인 페이지의 폼 제출을 처리합니다.
  폼 유효성 검사를 수행하고 새로운 작업을 데이터베이스에 추가합니다.
  한국 시간으로 현재 날짜를 설정하여 input_date 필드를 채웁니다.
  작업 추가 후 메인 페이지로 리디렉션합니다.

작업 수정 (GET /edit/<int:task_id>, POST /edit/<int:task_id>):
  로그인한 사용자만 접근할 수 있습니다.
  edit_task() 함수에서 특정 작업의 수정 페이지를 렌더링하고 폼 제출을 처리합니다.
  폼 유효성 검사를 수행하고 작업 세부 정보를 업데이트하여 데이터베이스에 저장합니다.
  작업 수정 후 메인 페이지로 리디렉션합니다.

작업 삭제 (GET /delete/<int:task_id>):
  로그인한 사용자만 접근할 수 있습니다.
  delete_task() 함수에서 특정 작업을 데이터베이스에서 삭제합니다.
  삭제 후 메인 페이지로 리디렉션합니다.

관리자 페이지 (GET /admin):
  관리자만 접근할 수 있습니다.
  admin() 함수에서 admin.html 템플릿을 렌더링하여 모든 사용자 목록을 표시합니다.

## 추가 내용

- 사용자 인증 및 권한 관리: 개선된 코드에서는 사용자 인증, 로그인, 로그아웃, 회원가입 기능이 추가되었으며, 세션을 사용하여 사용자 권한을 관리합니다.
- Task 관리 기능: 기본 코드에서는 모든 Task가 공개되었으나, 개선된 코드에서는 로그인한 사용자만 자신의 Task를 추가, 수정, 삭제할 수 있습니다.
- 관리자 기능: 기본 코드에는 관리자 기능이 없으나, 개선된 코드에서는 관리자만 모든 사용자 정보를 볼 수 있습니다.
- 플래시 메시지: 개선된 코드에서는 플래시 메시지를 사용하여 사용자에게 피드백을 제공합니다.
- CSRF 보호: 양쪽 코드 모두 CSRF 보호를 적용하지만, 개선된 코드에서는 인증이 필요한 작업에 CSRF 보호를 더 철저히 적용합니다.
- 네브 바 미 적용으로 url에 직접 입력해서 추가 기능 점검

## app.py 코드

1. 초기 설정 및 라이브러리 불러오기
   Flask는 웹 프레임워크이며, SQLAlchemy는 데이터베이스 ORM(Object Relational Mapping)입니다. Migrate는 데이터베이스 마이그레이션을, CSRFProtect는 CSRF(Cross-Site Request Forgery) 보호를 제공합니다. datetime과 pytz는 시간 관리를 위해 사용됩니다.

2. Flask 애플리케이션 및 데이터베이스 초기화
   여기서는 Flask 애플리케이션을 생성하고, 설정 파일(config.py)을 로드합니다. 데이터베이스와 마이그레이션, CSRF 보호 기능을 초기화합니다.

3. 관리자 계정 생성
   이 함수는 요청 전에 실행되며, 애플리케이션 컨텍스트 내에서 관리자 계정을 확인하고, 없으면 생성합니다.

4. 사용자 등록
   이 함수는 사용자 등록 페이지를 렌더링하고, 사용자 등록 폼을 처리합니다. 폼이 유효하면 새 사용자를 생성하고 데이터베이스에 추가합니다.

5. 로그인
   로그인 페이지를 렌더링하고, 로그인 폼을 처리합니다. 폼이 유효하고 사용자 인증이 성공하면 세션에 사용자 정보를 저장합니다.

6. 로그아웃
   로그아웃 기능을 처리합니다. 세션을 지우고 로그인 페이지로 리디렉션합니다.

7. 메인 페이지  
   메인 페이지를 렌더링합니다. 사용자가 로그인되어 있지 않으면 로그인 페이지로 리디렉션합니다.

8. 작업 목록 조회
   로그인된 사용자의 작업 목록을 JSON 형식으로 반환합니다.

9. 작업 추가
   작업 추가 폼을 처리하고, 새로운 작업을 생성하여 데이터베이스에 추가합니다.

10. 작업 수정
    작업 수정 폼을 처리하고, 기존 작업을 수정합니다. 사용자가 작업의 소유자인지 확인하여 권한을 검사합니다.

11. 작업 삭제
    작업을 삭제합니다. 사용자가 작업의 소유자인지 확인하여 권한을 검사합니다.

12. 관리자 페이지
    관리자 페이지를 렌더링합니다. 로그인한 사용자가 관리자인지 확인하여 권한을 검사합니다.

13. 애플리케이션 실행
    애플리케이션을 디버그 모드로 실행합니다.

설정:
app.py에서 플라스크 애플리케이션을 초기화하고 데이터베이스와 CSRF 보호를 설정합니다.

회원가입 (GET /register, POST /register):
register() 함수에서 RegistrationForm을 사용하여 회원가입 폼을 처리합니다.
사용자명 중복 확인한다.
폼 제출 시 유효성 검사를 수행하고 새로운 사용자를 데이터베이스에 추가합니다.

로그인 (GET /login, POST /login):
login() 함수에서 LoginForm을 사용하여 로그인 폼을 처리합니다.
폼 제출 시 유효성 검사를 수행하고 사용자를 인증합니다.
성공 시 세션에 사용자 정보를 저장하고 메인 페이지로 리디렉션합니다.

로그아웃 (GET /logout):
logout() 함수에서 세션을 지우고 로그인 페이지로 리디렉션합니다.

메인 페이지 (GET /):
로그인한 사용자만 접근할 수 있습니다.
index() 함수에서 index.html 템플릿을 렌더링하여 작업 추가 폼과 작업 목록을 표시합니다.

작업 목록 (GET /tasks):
로그인한 사용자만 접근할 수 있습니다.
tasks() 함수에서 데이터베이스의 모든 작업을 조회하여 JSON 형식으로 반환합니다.
자바스크립트에서 이 데이터를 받아 작업 목록을 화면에 표시합니다.

작업 추가 (POST /):
로그인한 사용자만 접근할 수 있습니다.
add_task() 함수에서 메인 페이지의 폼 제출을 처리합니다.
폼 유효성 검사를 수행하고 새로운 작업을 데이터베이스에 추가합니다.
한국 시간으로 현재 날짜를 설정하여 input_date 필드를 채웁니다.
작업 추가 후 메인 페이지로 리디렉션합니다.

작업 수정 (GET /edit/<int:task_id>, POST /edit/<int:task_id>):
로그인한 사용자만 접근할 수 있습니다.
edit_task() 함수에서 특정 작업의 수정 페이지를 렌더링하고 폼 제출을 처리합니다.
폼 유효성 검사를 수행하고 작업 세부 정보를 업데이트하여 데이터베이스에 저장합니다.
작업 수정 후 메인 페이지로 리디렉션합니다.

작업 삭제 (GET /delete/<int:task_id>):
로그인한 사용자만 접근할 수 있습니다.
delete_task() 함수에서 특정 작업을 데이터베이스에서 삭제합니다.
삭제 후 메인 페이지로 리디렉션합니다.

관리자 페이지 (GET /admin):
관리자만 접근할 수 있습니다.
admin() 함수에서 admin.html 템플릿을 렌더링하여 모든 사용자 목록을 표시합니다.

## 세션
- 세션은 클라이언트의 여러 요청을 연결하여 상태를 유지하는 역할
- 예를 들어 사용자가 로그인하면 세션에 사용자 이름을 저장하고 로그아웃시 세션에서 사용자 이름을 제거. 사용자가 로그인되어 있는지 세션을 통해 확인
- 세션을 통해 여러 HTTP 요청 간의 상태를 유지하고 사용자 인증 및 권한 관리를 수행할 수 있다.




## db migration
flask db init(초기화)
flask db migrate -m "migration"(마이그레이션 생성)
flask db upgrade(db 업그레이드)